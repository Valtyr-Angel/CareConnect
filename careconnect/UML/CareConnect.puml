@startuml
' Pakkenavn for organisering
package com.careconnect.modell {

    ' Abstrakt klasse Person
    abstract class Person {
        - personID : String
        - navn : String
        - adresse : String
        - telefonnummer : String
        - ePost : String
    }

    ' Pasient arver fra Person
    class Pasient extends Person {
        - pasientID : String
        - medisinskHistorie : List<Journalpost>
        - ioTEnheter : List<IoTEnhet>
        - resepter : List<Resept>
        - henvisninger : List<Henvisning>
        + mottaVarsel() : void
    }

    ' Helsepersonell arver fra Person
    abstract class Helsepersonell extends Person {
        - ansettelsesnummer : String
        - stilling : String
        - avdeling : String
    }

    ' Spesifikke typer helsepersonell
    class Ambulansepersonell extends Helsepersonell {
        - sertifiseringer : List<String>
        - kjoretoyTildeling : String
        + respondereTilNod() : void
        + oppdatereStatus() : void
    }

    class Fastlege extends Helsepersonell {
        - spesialisering : String
        - pasientListe : List<Pasient>
        + skriveResept(pasient : Pasient) : Resept
        + henviseTilSpesialist(pasient : Pasient) : Henvisning
    }

    class Sykepleier extends Helsepersonell {
        - kompetanseOmrader : List<String>
        - skiftPlan : List<Skift>
        + administrereMedisin(pasient : Pasient) : void
        + monitorerePasient(pasient : Pasient) : void
    }

    class Hjelpepleier extends Helsepersonell {
        - sertifikat : String
        + assistereSykepleier() : void
        + pasientOmsorg(pasient : Pasient) : void
    }

    ' Journalpost klasse
    class Journalpost {
        - journalID : String
        - dato : Date
        - notater : String
        - behandler : Helsepersonell
        + leggeTilNotat(notat : String) : void
        + viseJournal() : void
    }

    ' Skift klasse
    class Skift {
        - skiftID : String
        - startTid : LocalDateTime
        - sluttTid : LocalDateTime
        + beregneVarighet() : int
    }

    ' Resept klasse
    class Resept {
        - reseptID : String
        - medikament : String
        - dose : String
        - pasient : Pasient
        - utstedtAv : Helsepersonell
        - dato : Date
    }

    ' Henvisning klasse
    class Henvisning {
        - henvisningsID : String
        - spesialistType : String
        - pasient : Pasient
        - utstedtAv : Helsepersonell
        - dato : Date
    }

    ' Abstrakt klasse for IoT-enheter
    abstract class IoTEnhet {
        - enhetID : String
        - status : String
        + sendeData() : void
        + mottaInstruksjoner() : void
    }

    ' Spesifikke IoT-enheter
    class Smartdorlas extends IoTEnhet {
        + laaseOpp() : void
        + laaseIgjen() : void
    }

    class Bevegelsessensor extends IoTEnhet {
        + registrereBevegelse() : void
    }

    class Sengesensor extends IoTEnhet {
        + registrereUtgang() : void
        + registrereInngang() : void
    }

    class Medisindispenser extends IoTEnhet {
        + dispensereMedisin() : void
        + sjekkeLager() : void
    }

    class Armband extends IoTEnhet {
        + nfcKommunikasjon() : void
    }

    class Miljosensorer extends IoTEnhet {
        + maaleTemperatur() : double
        + maaleFuktighet() : double
        + oppdageGass() : boolean
    }

    class StemmekontrollertAssistent extends IoTEnhet {
        + mottaStemmekommando(kommando : String) : void
        + giSvar(svar : String) : void
    }

    ' Abstrakt klasse for smarte apparater
    abstract class SmartApparat extends IoTEnhet {
        + slaaPaa() : void
        + slaaAv() : void
    }

    ' Spesifikke smarte apparater
    class Kaffetrakter extends SmartApparat {
        + bryggKaffe() : void
    }

    class Mikrobølgeovn extends SmartApparat {
        + startOppvarming(tid : int) : void
    }

    class Toerketrommel extends SmartApparat {
        + startToerking(program : String) : void
    }

    class Vaskemaskin extends SmartApparat {
        + startVask(program : String) : void
    }

    class SmartLysstyringssystem extends SmartApparat {
        + justereLysstyrke(nivaa : int) : void
        + endreFarge(farge : String) : void
    }

    class Smarttermostat extends SmartApparat {
        + setTemperatur(temperatur : double) : void
        + faaGjeldendeTemperatur() : double
    }

    ' Systemapplikasjon
    class SystemApp {
        + overvakePasientData(pasient : Pasient) : void
        + sendeInstruksjoner(enhet : IoTEnhet) : void
    }

    ' Relasjoner
    Person <|-- Helsepersonell
    Person <|-- Pasient

    Helsepersonell <|-- Ambulansepersonell
    Helsepersonell <|-- Fastlege
    Helsepersonell <|-- Sykepleier
    Helsepersonell <|-- Hjelpepleier

    IoTEnhet <|-- SmartApparat
    IoTEnhet <|-- Smartdorlas
    IoTEnhet <|-- Bevegelsessensor
    IoTEnhet <|-- Sengesensor
    IoTEnhet <|-- Medisindispenser
    IoTEnhet <|-- Armband
    IoTEnhet <|-- Miljosensorer
    IoTEnhet <|-- StemmekontrollertAssistent

    SmartApparat <|-- Kaffetrakter
    SmartApparat <|-- Mikrobølgeovn
    SmartApparat <|-- Toerketrommel
    SmartApparat <|-- Vaskemaskin
    SmartApparat <|-- SmartLysstyringssystem
    SmartApparat <|-- Smarttermostat

    ' Oppdaterte assosiasjoner
    Pasient "1" -- "0..*" IoTEnhet : "har"
    Pasient "1" -- "0..*" Resept : "har"
    Pasient "1" -- "0..*" Henvisning : "har"

    Resept "1" -- "1" Helsepersonell : "utstedtAv"
    Henvisning "1" -- "1" Helsepersonell : "utstedtAv"

    Fastlege "1" -- "0..*" Pasient : "pasientListe"
    Pasient "1" -- "0..*" Journalpost : "medisinskHistorie"
    Sykepleier "1" -- "0..*" Skift : "skiftPlan"
    Armband "1" -- "1" Pasient : "NFC-link"

    Helsepersonell "1" ..> SystemApp : "bruker"
    SystemApp ..> IoTEnhet : "kommuniserer med"
    StemmekontrollertAssistent ..> IoTEnhet : "kontrollerer"
}
@enduml
